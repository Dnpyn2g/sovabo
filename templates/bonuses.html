{% extends "base.html" %}

{% block title %}–ë–æ–Ω—É—Å—ã - CRM{% endblock %}

{% block content %}
<div class="card">
    <h2>üéÅ –ë–æ–Ω—É—Å—ã –∑–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</h2>
    <p style="color: #666; margin-bottom: 1rem;">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ–Ω—É—Å–æ–≤ –ø—Ä–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏ –±–∞–ª–∞–Ω—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏. –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª—å—à–∏–π –ø–æ–¥—Ö–æ–¥—è—â–∏–π –±–æ–Ω—É—Å –ø–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Å—É–º–º–µ.</p>
    <a href="{{ url_for('bonuses_new') }}" class="btn btn-success">‚ûï –°–æ–∑–¥–∞—Ç—å –±–æ–Ω—É—Å</a>
</div>

<div class="card">
    <h3>–°–ø–∏—Å–æ–∫ –±–æ–Ω—É—Å–æ–≤</h3>
    {% if bonuses %}
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>–ú–∏–Ω. —Å—É–º–º–∞</th>
                <th>–¢–∏–ø</th>
                <th>–ë–æ–Ω—É—Å</th>
                <th>–ü—Ä–∏–º–µ—Ä</th>
                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                <th>–ê–∫—Ç–∏–≤–µ–Ω</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for bonus in bonuses %}
            <tr>
                <td>{{ bonus.id }}</td>
                <td>{{ "%.2f"|format(bonus.min_amount) }} $</td>
                <td>
                    {% if bonus.bonus_type == 'multiplier' %}
                    ‚úñÔ∏è –ú–Ω–æ–∂–∏—Ç–µ–ª—å
                    {% else %}
                    ‚ûï –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
                    {% endif %}
                </td>
                <td>
                    {% if bonus.bonus_type == 'multiplier' %}
                    <strong style="color: #e74c3c;">x{{ "%.1f"|format(bonus.bonus_amount) }}</strong>
                    {% else %}
                    <strong style="color: #27ae60;">+{{ "%.2f"|format(bonus.bonus_amount) }} $</strong>
                    {% endif %}
                </td>
                <td style="font-size: 0.9rem; color: #666;">
                    {% if bonus.bonus_type == 'multiplier' %}
                    {{ "%.0f"|format(bonus.min_amount) }}$ ‚Üí <strong>{{ "%.0f"|format(bonus.min_amount * bonus.bonus_amount) }}$</strong>
                    {% else %}
                    {{ "%.0f"|format(bonus.min_amount) }}$ ‚Üí <strong>{{ "%.0f"|format(bonus.min_amount + bonus.bonus_amount) }}$</strong>
                    {% endif %}
                </td>
                <td>{{ bonus.description or '‚Äî' }}</td>
                <td>{{ '‚úÖ' if bonus.is_active else '‚ùå' }}</td>
                <td>
                    <form method="post" action="{{ url_for('bonuses_delete', bonus_id=bonus.id) }}" style="display: inline;">
                        <button type="submit" class="btn btn-danger" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –±–æ–Ω—É—Å?')">üóëÔ∏è</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>–ë–æ–Ω—É—Å–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç</p>
    {% endif %}
</div>
{% endblock %}
