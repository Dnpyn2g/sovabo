{% extends "base.html" %}

{% block title %}–ù–æ–≤—ã–π –±–æ–Ω—É—Å - CRM{% endblock %}

{% block content %}
<div class="card">
    <h2>‚ûï –°–æ–∑–¥–∞—Ç—å –±–æ–Ω—É—Å</h2>
    
    <div style="background: #e3f2fd; padding: 1rem; border-radius: 4px; margin-bottom: 1rem;">
        <strong>üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:</strong>
        <ul style="margin: 0.5rem 0 0 1.5rem;">
            <li><strong>–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–æ–Ω—É—Å:</strong> –ü—Ä–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ—Ç 100$ –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è +50$</li>
            <li><strong>–ú–Ω–æ–∂–∏—Ç–µ–ª—å x2:</strong> –ü—Ä–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ—Ç 500$ —Å—É–º–º–∞ —É–¥–≤–∞–∏–≤–∞–µ—Ç—Å—è (500$ ‚Üí 1000$)</li>
            <li><strong>–ú–Ω–æ–∂–∏—Ç–µ–ª—å x1.5:</strong> –ü—Ä–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏ –æ—Ç 1000$ —Å—É–º–º–∞ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –≤ 1.5 —Ä–∞–∑–∞ (1000$ ‚Üí 1500$)</li>
        </ul>
    </div>
    
    <form method="post" action="{{ url_for('bonuses_create') }}">
        <div class="form-group">
            <label>–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è *</label>
            <input type="number" name="min_amount" step="0.01" required placeholder="100">
        </div>
        
        <div class="form-group">
            <label>–¢–∏–ø –±–æ–Ω—É—Å–∞ *</label>
            <select name="bonus_type" id="bonus_type" required onchange="updateBonusLabel()">
                <option value="fixed">–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞ (+)</option>
                <option value="multiplier">–ú–Ω–æ–∂–∏—Ç–µ–ª—å (x)</option>
            </select>
        </div>
        
        <div class="form-group">
            <label id="bonus_label">–°—É–º–º–∞ –±–æ–Ω—É—Å–∞ *</label>
            <input type="number" name="bonus_amount" step="0.01" required placeholder="10" id="bonus_amount">
            <small id="bonus_hint" style="color: #666;">–ù–∞–ø—Ä–∏–º–µ—Ä: 10 = +10$ –∫ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—é</small>
        </div>
        
        <div class="form-group">
            <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
            <input type="text" name="description" placeholder="–ë–æ–Ω—É—Å –∑–∞ –ø–µ—Ä–≤–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ">
        </div>
        
        <script>
        function updateBonusLabel() {
            const type = document.getElementById('bonus_type').value;
            const label = document.getElementById('bonus_label');
            const hint = document.getElementById('bonus_hint');
            const input = document.getElementById('bonus_amount');
            
            if (type === 'multiplier') {
                label.textContent = '–ú–Ω–æ–∂–∏—Ç–µ–ª—å *';
                hint.textContent = '–ù–∞–ø—Ä–∏–º–µ—Ä: 2 = –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ x2 (100$ ‚Üí 200$)';
                input.placeholder = '2';
            } else {
                label.textContent = '–°—É–º–º–∞ –±–æ–Ω—É—Å–∞ *';
                hint.textContent = '–ù–∞–ø—Ä–∏–º–µ—Ä: 10 = +10$ –∫ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—é';
                input.placeholder = '10';
            }
        }
        </script>
        
        <div class="form-group">
            <label>–ê–∫—Ç–∏–≤–µ–Ω</label>
            <input type="checkbox" name="is_active" checked>
        </div>
        
        <button type="submit" class="btn btn-success">üíæ –°–æ–∑–¥–∞—Ç—å</button>
        <a href="{{ url_for('bonuses_list') }}" class="btn btn-secondary">‚ùå –û—Ç–º–µ–Ω–∞</a>
    </form>
</div>
{% endblock %}
